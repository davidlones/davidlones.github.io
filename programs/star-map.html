<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Interactive Star Map</title>
<style>
  /* Page + layers */
  html,body{height:100%;margin:0}
  body{background:#0b0d16;color:#e8eefc;font-family:system-ui,Segoe UI,Roboto,Ubuntu}

  /* Fullscreen background mount for the React app */
  #bg{
    position:fixed; inset:0;
    z-index:0;                /* behind any optional HUD you add later */
    overflow:hidden; 
    background:#0b0d16;
  }
  #root{
    position:absolute; inset:0;
    width:100%; height:100%;
    display:block;
  }

  /* üîí Hard overrides so the star map cannot render as a tiny inline box */
  #root > *{             /* whatever the app renders first */
    position:absolute; inset:0;
    width:100% !important; height:100% !important;
    max-width:none !important; max-height:none !important;
    display:block !important;
  }
  #root :is(svg,canvas){
    position:absolute; inset:0;
    width:100% !important; height:100% !important;
    max-width:none !important; max-height:none !important;
    display:block !important;
  }

  /* Optional top bar (kept minimal) */
  .topbar{
    position:fixed; left:0; right:0; top:0; z-index:2;
    display:flex; gap:.5rem; align-items:center; justify-content:space-between;
    padding:.6rem .9rem;
    background:linear-gradient(180deg,#101425cc,#0b0d16cc);
    border-bottom:1px solid #1c2235;
    backdrop-filter:saturate(130%) blur(6px);
    font-size:.95rem;
  }
  .btn{border:1px solid #2a3557; background:#16203b; color:#d9e3ff; padding:.25rem .6rem; border-radius:.5rem; cursor:pointer}
  .btn:hover{background:#1a274a}
  .brand{display:flex; align-items:center; gap:.6rem; font-weight:700; letter-spacing:.2px}
  .brand .pill{font-size:.72rem; padding:.1rem .45rem; border-radius:.5rem; background:#20315f; border:1px solid #2a3c6e}

  /* Bottom hint bar (optional) */
  .bottombar{
    position:fixed; left:0; right:0; bottom:0; z-index:2;
    padding:.35rem .7rem; color:#aeb9d8; font-size:.85rem;
    background:linear-gradient(0deg,#0b0d16cc,#0b0d1600);
    pointer-events:none;
  }
</style>

<!-- React UMD + Babel (for the uploaded JSX) -->
<script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>

<!-- Optional UI layer -->
<div class="topbar">
  <div class="brand">üõ∞Ô∏è Interactive Star Map <span class="pill">SOL-37</span></div>
  <div>
    <button class="btn" onclick="window.scrollTo({top:0,behavior:'smooth'})">Top</button>
    <button class="btn" onclick="location.reload()">Restart</button>
  </div>
</div>

<!-- Fullscreen star-map background -->
<div id="bg">
  <div id="root"></div>
</div>

<div class="bottombar">Pan: drag ‚Ä¢ Zoom: wheel ‚Ä¢ Click objects for details</div>

<script>
(async function(){
  try{
    const resp = await fetch('./interactive_star_map_v_2_react_web_app.jsx', { cache:'no-store' });
    const src0 = await resp.text();

    // Map ESM-style imports to globals for UMD runtime
    let src = src0
      .replace(/^\s*import\s+React[^;]*?from\s+["']react["'];?\s*/m,
               "const { useEffect, useMemo, useRef, useState } = React;")
      .replace(/\bexport\s+default\s+function\s+App\s*\(/, "function App(");

    const out = Babel.transform(src, { presets: ['react'] }).code;
    new Function(out + "\nwindow.__StarMapApp = App;")();

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(window.__StarMapApp));
  }catch(err){
    console.error(err);
    document.body.insertAdjacentHTML('beforeend',
      '<div style="position:fixed;inset:0;display:grid;place-items:center;color:#f99">Failed to load Star Map: '+(err&&err.message||err)+'</div>');
  }

  /* --- Force-resize helpers ------------------------------------------------ */
  // If the app sets width/height attributes on <svg>/<canvas>, strip them so CSS can rule.
  function expandCanvases(){
    document.querySelectorAll('#root svg,#root canvas').forEach(el=>{
      el.removeAttribute('width'); el.removeAttribute('height');
      el.style.width='100%'; el.style.height='100%';
      el.style.maxWidth='none'; el.style.maxHeight='none';
      el.style.position='absolute'; el.style.inset='0';
    });
    // Nudge any size listeners the app uses
    window.dispatchEvent(new Event('resize'));
  }
  new MutationObserver(expandCanvases).observe(document.getElementById('root'), {childList:true,subtree:true,attributes:true});
  new ResizeObserver(()=>window.dispatchEvent(new Event('resize'))).observe(document.getElementById('bg'));
  expandCanvases();
})();
</script>
</body>
</html>
