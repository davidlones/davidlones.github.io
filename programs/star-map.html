<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Interactive Star Map</title>
<style>
  html,body { height:100%; margin:0; background:#060812; color:#eee;
              font-family:system-ui,Segoe UI,Roboto,Ubuntu; overflow:hidden; }
  #root { position:relative; width:100%; height:100%; display:flex; flex-direction:column; }
  /* Center boot overlay */
  .boot { position:absolute; inset:0; display:grid; place-items:center;
          font-size:15px; letter-spacing:.2px; opacity:.8; background:#060812; }
  /* Override all canvases the app creates */
  canvas {
    width:100%!important;
    height:100%!important;
    aspect-ratio:auto!important;
    display:block;
  }
  /* Optional visual polish */
  #root::before {
    content:"";
    position:absolute; inset:0;
    background:radial-gradient(ellipse at center, #0c101e 0%, #060812 100%);
    z-index:-1;
  }
</style>
<!-- React + Babel -->
<script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
<div id="root"></div>
<div class="boot" id="boot">✨ Initializing Interactive Star Map…</div>

<script>
(async function(){
  try{
    const resp = await fetch('./interactive_star_map_v_2_react_web_app.jsx', { cache:'no-store' });
    let src = await resp.text();

    // Patch imports/exports for UMD runtime
    src = src
      .replace(/^\s*import\s+React[^;]*?from\s+["']react["'];?\s*/m,
               "const { useEffect,useMemo,useRef,useState } = React;")
      .replace(/\bexport\s+default\s+function\s+App\s*\(/, "function App(");

    const out = Babel.transform(src, { presets:['react'] }).code;
    (new Function(out + "\nwindow.__StarMapApp = App;"))();

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(window.__StarMapApp));

    // Allow a moment for React to mount before killing the boot overlay
    setTimeout(()=> document.getElementById('boot').remove(), 600);
  }catch(err){
    const boot=document.getElementById('boot');
    boot.textContent='⚠️ Failed to load Star Map: '+(err?.message||err);
    console.error(err);
  }
})();
</script>
</body>
</html>
