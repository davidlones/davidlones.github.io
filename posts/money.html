<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Money Flow Engine — Layered</title>

<style>
:root{
--bg:#06090f;
--panel:#0f1624;
--node:#1b2a3a;
--accent:#7cd4ff;
--accent2:#9cffb5;
--warn:#ffb86b;
--text:#e8f1ff;
--muted:#93a6c7;
}

body{
margin:0;
background:radial-gradient(circle at 50% 20%, #0b1420, #06090f 70%);
color:var(--text);
font-family:Inter,system-ui;
display:flex;
flex-direction:column;
align-items:center;
}

header{
padding:26px 20px 10px;
text-align:center;
}

#wrap{
width:100%;
max-width:1250px;
padding:18px;
display:grid;
grid-template-columns:1fr 360px;
gap:18px;
}

.card{
background:linear-gradient(180deg,#0f1624,#0c1320);
border-radius:18px;
padding:18px;
box-shadow:0 20px 50px rgba(0,0,0,.55);
}

.controls button{
margin:4px;
padding:6px 10px;
border-radius:8px;
border:1px solid #22344a;
background:#121c2d;
color:var(--muted);
cursor:pointer;
}

.controls button.active{
border-color:var(--accent);
color:var(--text);
}

svg{
width:100%;
height:640px;
}

.node circle{
fill:var(--node);
stroke:var(--accent);
stroke-width:2;
transition:.25s;
}

.node.owned circle{
stroke:var(--warn);
filter:drop-shadow(0 0 12px rgba(255,184,107,.6));
}

.flow{
fill:none;
stroke:var(--accent2);
stroke-width:3;
stroke-dasharray:10 8;
opacity:.6;
marker-end:url(#arrow);
}

.policy{
stroke:var(--warn);
stroke-width:2;
stroke-dasharray:3 6;
opacity:0;
transition:.4s;
}

.policy.visible{
opacity:.9;
}

.missing{
stroke:#ff6b6b;
stroke-width:4;
stroke-dasharray:4 6;
opacity:0;
}

.missing.visible{
opacity:1;
filter:drop-shadow(0 0 10px rgba(255,107,107,.6));
}

.side h3{margin-top:0}
</style>

</head>

<body>

<header>
<h1>Money Flow Engine</h1>
<div style="color:var(--muted)">Layered ownership • policy • structural forks</div>
</header>

<div id="wrap">

<div class="card">

<div class="controls">
<button data-layer="base" class="active">Base</button>
<button data-layer="ownership">Ownership</button>
<button data-layer="policy">Policy</button>
<button data-layer="missing">Missing links</button>
</div>

<svg viewBox="0 0 900 640">

<defs>
<marker id="arrow" markerWidth="8" markerHeight="8" refX="5" refY="3" orient="auto">
<path d="M0,0 L6,3 L0,6 Z" fill="#9cffb5"/>
</marker>
</defs>

<g class="node" id="Infrastructure" transform="translate(450,110)">
<circle r="85"/><text text-anchor="middle" dy="5">Infrastructure</text>
</g>

<g class="node owned" id="Firms" transform="translate(760,330)">
<circle r="85"/><text text-anchor="middle" dy="5">Firms</text>
</g>

<g class="node owned" id="Finance" transform="translate(450,330)">
<circle r="70"/><text text-anchor="middle" dy="5">Finance</text>
</g>

<g class="node" id="Government" transform="translate(140,330)">
<circle r="85"/><text text-anchor="middle" dy="5">Government</text>
</g>

<g class="node" id="Households" transform="translate(450,560)">
<circle r="85"/><text text-anchor="middle" dy="5">Households</text>
</g>

<!-- base flows -->

<path class="flow" d="M520 540 Q720 480 760 370"/>
<path class="flow" d="M700 330 Q560 480 500 540"/>
<path class="flow" d="M720 260 Q560 160 470 150"/>
<path class="flow" d="M390 540 Q210 410 160 370"/>
<path class="flow" d="M160 290 Q300 470 420 540"/>
<path class="flow" d="M450 330 Q620 330 740 330"/>
<path class="flow" d="M450 330 Q260 330 160 330"/>

<!-- policy overlay -->

<path id="policyInfra" class="policy" d="M140 330 Q300 200 450 150"/>

<!-- missing connection -->

<path id="missingInfra" class="missing" d="M140 330 Q300 200 450 150"/>

</svg>

</div>

<div class="card side">
<h3 id="title">Layer: Base</h3>
<p id="desc">
Base layer shows circulation.  
Other layers reveal ownership, policy leverage, and structural gaps.
</p>
</div>

</div>

<script>
const buttons=document.querySelectorAll(".controls button");
const policy=document.getElementById("policyInfra");
const missing=document.getElementById("missingInfra");
const nodes=document.querySelectorAll(".node");

buttons.forEach(b=>{
b.onclick=()=>{
buttons.forEach(x=>x.classList.remove("active"));
b.classList.add("active");

const layer=b.dataset.layer;

policy.classList.remove("visible");
missing.classList.remove("visible");
nodes.forEach(n=>n.classList.remove("owned"));

if(layer==="ownership"){
document.getElementById("Firms").classList.add("owned");
document.getElementById("Finance").classList.add("owned");
}

if(layer==="policy"){
policy.classList.add("visible");
}

if(layer==="missing"){
missing.classList.add("visible");
}

document.getElementById("title").textContent="Layer: "+layer;
};
});
</script>

</body>
</html>
